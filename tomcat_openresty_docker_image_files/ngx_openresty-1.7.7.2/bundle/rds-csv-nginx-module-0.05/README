Name
    ngx_rds_csv - Nginx output filter module to convert Resty-DBD-Streams
                  (RDS) to Comma-Separated Values (CSV)

Status
    This module is considered production ready.

Synopsis
    location /foo {
        # drizzle_pass/postgres_pass/...

        rds_csv on;
        rds_csv_row_terminator "\n"; # default to "\r\n"
    }

Description
    This module implements an efficient output filter that converts
    Resty-DBD-Streams (RDS) generated by ngx_drizzle and ngx_postgres
    to Comma-Separated Values (CSV) format in a streaming fashion.
    By default, the CSV format is in compliance with RFC 4180:

        http://tools.ietf.org/html/rfc4180

    SQL NULL values will be converted to empty field value, just like
    empty string values.

Directives
    rds_csv
        syntax: rds_csv on|off
        default: rds_csv off
        context: http, server, location, location if

        Enable this output filter when on and disable otherwise.

    rds_csv_row_terminator
        syntax: rds_csv_row_terminator <str>
        default: rds_csv_row_terminator "\r\n"
        context: http, server, location, location if

        Specify the row terminator used by the CSV format.
        Only '\r\n' and '\n' are allowed.

        Default to '\r\n', i.e., CR LF, according to RFC 4180.

    rds_csv_field_separator
        syntax: rds_csv_field_separator <char>
        default: rds_csv_field_separator ','
        context: http, server, location, location if

        Specify the field seperator used by the CSV format.
        Only ',', ';', and '\t' are allowed.

        Default to ',' according to RFC 4180.

    rds_csv_field_name_header
        syntax: rds_csv_field_name_header on|off
        default: rds_csv_field_name_header off
        context: http, server, location, location if

        Emits the first line of field names when this directive is set on,
        and none otherwise.

    rds_csv_content_type
        syntax: rds_csv_content_type <str>
        default: rds_csv_content_type "text/csv; header=<present|absence>"
        context: http, server, location, location if

        Specify the Content-Type generated by this module.

        Default to "text/csv; header=present" or "text/csv; header=absence",
        depending on whether rds_csv_field_name_header is on or off.

    rds_csv_buffer_size
        syntax: rds_csv_buffer_size <size>
        default: rds_csv_buffer_size 4k/8k
        context: http, server, location, location if

        The lager this buffer size setting, the less streammy the output
        will be.

Compatibility

    This module is compatible with the following versions of Nginx:

    * 1.4.x (last tested: 1.4.3)
    * 1.2.x (last tested: 1.2.9)
    * 1.1.x (last tested: 1.1.5)
    * 1.0.x (last tested: 1.0.8)

Author
    Yichun "agentzh" Zhang <agentzh@gmail.com>, CloudFlare Inc.

Copyright & License
    This module is licenced under the BSD license.

    Copyright (C) 2011-2013, Yichun "agentzh" Zhang (章亦春) <agentzh@gmail.com>, CloudFlare Inc.

    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions
    are met:

        * Redistributions of source code must retain the above copyright
        notice, this list of conditions and the following disclaimer.

        * Redistributions in binary form must reproduce the above copyright
        notice, this list of conditions and the following disclaimer in the
        documentation and/or other materials provided with the distribution.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
    TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
    PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
    LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
    NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
    SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

